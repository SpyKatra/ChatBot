<html>
<head>
<title>Messages contenant '!call'</title>
<meta http-equiv='refresh' content='10'>
<style>
body { font-family: Arial, sans-serif; }
ul { list-style-type: none; padding: 0; }
li { margin: 5px 0; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9; display: flex; justify-content: space-between; align-items: center; }
strong { color: #2b2b2b; }
button { padding: 10px 20px; cursor: pointer; background-color: #f44336; color: white; border: none; margin: 10px 0; }
</style>
</head>
<body>
<h1>Messages contenant '!call'</h1>
<button id='deleteButton' onclick='supprimerTousLesMessages()' disabled>Supprimer tous les messages</button>
<ul>
<li><strong>2024-09-24 09:24:55 - Lucasdep19 ::</strong> !call sugar 1000</li>
<li><strong>2024-09-24 09:25:33 - jarn0 ::</strong> !call fire the hole</li>
<li><strong>2024-09-24 09:32:05 - SpyBot ::</strong> !call road rage</li>
</ul>

        <script>
        function supprimerTousLesMessages() {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://127.0.0.1:5000/delete_all_messages", true);
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log("Tous les messages ont été supprimés.");
                    location.reload();  // Recharger la page après suppression
                } else if (xhr.readyState == 4) {
                    console.log("Erreur lors de la suppression des messages.");
                }
            };

            xhr.send();
        }
        </script>
        </body>
</html>
